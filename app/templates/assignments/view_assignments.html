
  {% extends "header.html" %}
  
  
  {% block app_content %}
<div class="container">
<br>
  {% if admin %}
  <div class="row">
        <div class="col-md-8">
        	<h1>Admin assignments view</h1>
         <hr>
        </div>
    </div>
  <br />
   <div class="container">
     <p><a class="btn btn-primary" href="{{url_for('assignments.create_assignment')}}" role="button">Create assignment</a></p>
     <br>
      <br>
      <div class="row">
        <div class="col-xs-12">
          <div class="table-responsive">
            <table summary="The following assignments have been made" class="table table-bordered table-hover">
        	  <thead>
              <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Description</th>
        		  <th>Due date</th>
        		  <th>Created by</th>
        		  <th>For class</th>
        		  <th>Creation time</th>
            <th>Peer Review Necessary</th>
        		  <th>Peer review form</th>
        		  <th>Actions</th>
            </tr>
          </thead>
		  <tbody>
			{% for assignment, user in assignmentsArray %}
            <tr>
              <td>{{assignment.id}}</td>
              <td>{{assignment.title}}</td>
              <td>{{assignment.description}}</td>
			  <td>{{assignment.due_date}}</td>
			  <td>{{user.username}}</td>
              <td>{{assignment.target_course}}</td>
              <td>{{assignment.timestamp}}</td>
              <td>{{assignment.peer_review_necessary}}</td>
			  <td>{{assignment.peer_review_form}}</td>
			  <td>
      <a href="{{url_for('assignments.delete_assignment', assignment_id = assignment.id)}}">  <img src='/static/trash-alt.svg' alt="Delete Assignment" width="25" heigth="25%"></a>
      <a href="{{url_for('assignments.view_assignment_details', assignment_id = assignment.id)}}">  <img src='/static/edit.svg' alt="View Details" width="25" heigth="25%"></a>
      
     </td>
            </tr>
           {% endfor %}
          </tbody>
          <tfoot>
            <tr>
            </tr>
          </tfoot>
        </table>
      </div><!--end of .table-responsive-->
    </div>
  </div>
</div>
   
   {% elif assignmentsArray %}
  
    <div class="row">
         <div class="col-md-3">
      			<h1>Assignments</h1>
    		</div>
     </div>
 
 <hr>          
  <br><br>
    {% for assignment in assignmentsArray %}
        <div class="card bg-light mb-3">
        <div class="card-body">
         
      <h5>{{assignment['title']}}</h5>
          <h6 class="card-title">Due {{assignment['humanized_due_date']}} ({{assignment['due_date']}})</h6>
          <p class="card-text">{{assignment['description']}}</p>
        </div>
        <div class="card-footer">
                 {% if assignment['submitted_filename'] %}                   
                        <a href="" class="btn btn-secondary btn-lg btn-sm disabled " role="button" aria-disabled="true">{{assignment['submitted_filename']}}</a>
                     
                     {% if assignment['peer_review_necessary'] == True %}                   
                     
                        {% if assignment['complete_peer_review_count'] == 0 %}
                           
                            <a href="{{url_for('files.download_file', assignment_id = assignment['id'])}}" class="btn btn-primary btn-sm" role="button" aria-disabled="true">Submit Review 1</a>
                               <a href="#" class="btn btn-default btn-sm disabled" role="button" disabled="true">Submit Review 2</a>
                     
                         {% elif assignment['complete_peer_review_count'] == 1 %}
                            <a href="{{url_for('files.view_peer_review', assignment_id = assignment['id'], peer_review_number = 1)}}" class="btn btn-success btn-sm" role="button" aria-disabled="true">View Review 1</a>
                           <a href="{{url_for('files.download_file', assignment_id = assignment['id'])}}" class="btn btn-primary btn-sm" role="button" aria-disabled="true">Submit Review 2</a>
                         {% elif assignment['complete_peer_review_count'] == 2 %}
                         <a href="{{url_for('files.view_peer_review', assignment_id = assignment['id'], peer_review_number = 1)}}" class="btn btn-success btn-sm" role="button" aria-disabled="true">View Review 1</a>
                         <a href="{{url_for('files.view_peer_review', assignment_id = assignment['id'], peer_review_number = 2)}}" class="btn btn-success btn-sm" role="button" aria-disabled="true">View Review 2</a>
                         {% endif %}
                     {% else %}
                      <a href="" class="btn btn-info btn-lg btn-sm disabled " role="button" aria-disabled="true">This assignment will not be peer-reviewed</a>
                     
                     {% endif %}
                {% else %}
                    {% if assignment['assignment_is_past_deadline'] %}
                      <a href="#" class="btn btn-danger btn-sm disabled" role="button" aria-disabled="true">Assignment overdue.</a>
                    {% else %}
                        <a href="{{url_for('files.upload_file', assignment_id = assignment['id'])}}" class="btn btn-primary btn-sm" role="button" aria-disabled="true">Upload your assignment</a>
                    {% endif %}
              
            {% endif %}
      
          </div>
        </div>
        
        
      
        {% endfor %}
        
      
      {% else %}
      	You have no assignments at present.
    	{% endif %}
  </div>
{% endblock %}
