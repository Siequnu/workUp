{% extends "header.html" %}

{% block app_content %}
<br>

{% if current_user.is_anonymous %}	
	<div class="container">
	<div class="jumbotron">
		
  <h1 class="display-4">workUp - Learning Management System</h1>
  <p class="lead">workUp is a web app that helps teachers and students manage assignments.</p>
  <hr class="my-4">
  <p>It allows students to track assignments and receive randomised work for peer review. Teachers can
	create, track and grade class assignments.</p>
  <a class="btn btn-primary btn-lg" href="{{url_for('user.register')}}" role="button">Student registration</a>
	</div>
	<hr>
	<br /><br />
	</div>
             
{% elif admin %}
	<div class="container">
	<div class="row">
        
			<h1>Hi, Administrator {{ current_user.username }}!</h1>
				
    </div>
	
	<hr>
	<br /><br />
	<div class="card-deck">
	 <div class="card bg-light mb-2" style="max-width: 20rem;">
		<div class="card-header">Student classes
		</div>
    <div class="card-body">
      <h5 class="card-title">Add or remove class information.</h5><hr>
      
			<p><a class="btn btn-primary" href="{{url_for('assignments.create_class')}}" role="button">Create new class</a></p>
			<p><a class="btn btn-primary" href="{{url_for('assignments.class_admin')}}" role="button">Manage classes</a></p>
    </div>
  </div>
	 
	 <div class="card bg-light mb-2" style="max-width: 20rem;">
		<div class="card-header">Peer review forms
		</div>
    <div class="card-body">
      <h5 class="card-title">Add or remove peer review forms.</h5><hr>
      <p><a class="btn btn-primary" href="{{url_for('assignments.add_peer_review_form')}}" role="button">New peer review form</a></p>
			<a class="btn btn-primary" href="{{url_for('assignments.peer_review_form_admin')}}" role="button">Manage peer review forms</a>
    </div>
  </div>
	 
	 <div class="card bg-light mb-2" style="max-width: 20rem;">
		<div class="card-header">Assignments
		</div>
    <div class="card-body">
      <h5 class="card-title">Create and manage assignments</h5><hr>
			<p><a class="btn btn-primary" href="{{url_for('assignments.create_assignment')}}" role="button">Create assignment</a></p>
			<p><a class="btn btn-primary" href="{{url_for('assignments.view_assignments')}}" role="button">Manage assignments</a></p>
    </div>
  </div>	 
</div>
	
	<br /><br />
	<div class="card-deck">
	 <div class="card bg-light mb-2" style="max-width: 20rem;">
		<div class="card-header">Users
		</div>
    <div class="card-body">
      <h5 class="card-title">Manage users</h5><hr>
			<p><a class="btn btn-primary" href="{{url_for('user.register_admin')}}" role="button">Create new admin</a></p>
			<p><a class="btn btn-primary" href="{{url_for('user.manage_users')}}" role="button">Manage users</a></p>
			<p><a class="btn btn-primary" href="{{url_for('user.batch_import_students')}}" role="button">Batch import students</a></p>
    </div>
  </div>
	</div>
{% else %}
		<div class="container">
	<div class="row">
         <div class="container"> 
			<h1 class="text-warning">Hi, {{ current_user.username }}!</h1>
	</div>
				 </div>
	 <hr>
	<br /><br />
<div class="card-deck">
	 <div class="card bg-light mb-2" style="max-width: 20rem;">
		<div class="card-header">Your info
		</div>
    <div class="card-body">
      
      <h5 class="card-title">You have uploaded {{number_of_uploads}} assignments.</h5>
      {% if last_upload_humanized_timestamp != False %}
			<p class="card-text"><small class="text-muted">Last uploaded {{last_upload_humanized_timestamp}}</small></p>
			{% endif %}
    </div>
  </div>
	 
	 <div class="card bg-light mb-2" style="max-width: 20rem;">
		<div class="card-header">Peer reviews
		</div>
    <div class="card-body">
      
      <h5 class="card-title">Your essays have been reviewed {{number_of_peer_reviews_on_own_uploads}} times.</h5>
        {% if last_received_peer_review_humanized_timestamp != False %}
			<p class="card-text"><small class="text-muted">Last reviewed {{last_received_peer_review_humanized_timestamp}}</small></p>
			{% endif %}
    </div>
  </div>
</div>

	<br />
	<div class="card-deck">
	<div class="card">
  <div class="card-header">
    <h4>Assignments completion</h4>
  </div>
  <div class="card-body">
     <div class="progress">
      {% if upload_progress_percentage==100 %}
			<div class="progress-bar progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:{{upload_progress_percentage}}%" id='width'>
				{{upload_progress_percentage}}%
			{% else %}
			<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:{{upload_progress_percentage}}%" id='width'>
			  {{upload_progress_percentage}}%
			{% endif %}
      </div>
    </div>
  </div>
</div>
	
	
	<div class="card">
  <div class="card-header">
    <h4>Peer review completion</h4>
  </div>
  <div class="card-body">
     <div class="progress">
      {% if peer_review_progress_percentage==100 %}
			<div class="progress-bar progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:{{peer_review_progress_percentage}}%" id='width'>
				{{peer_review_progress_percentage}}%
			{% else %}
			<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:{{peer_review_progress_percentage}}%" id='width'>
			  {{peer_review_progress_percentage}}%
			{% endif %}
      </div>
    </div>
</div>
		 </div>
	
	</div>
	</div>
{% endif %}				
{% endblock %}