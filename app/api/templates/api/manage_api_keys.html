{% extends "header.html" %}

{% block app_content %}
{% block body %}
<div class="container">
 <br>
<div class="container">
        <div class="row">
            <div class="col-md-2">
                <a href="{{url_for('main.index')}}" <button class="btn btn-light"><i class="fa fa-chevron-left"></i> Back</button></a>
            </div>
            <div class="col-md-10">

                <h1><i class="fa fa-tools"></i> Manage API Keys</h1>

            </div>
        </div>
<hr>
 <div class="row">

   
   <div class="col-md-3">
 <h5>API access</h5>
  
  <div class="btn-group btn-toggle">
   {% if registration_is_open %}
   <a href="{{url_for('user.toggle_registration_status')}}" <button class="btn btn btn-primary active">ON</button></a>
   <a href="{{url_for('user.toggle_registration_status')}}" <button class="btn btn btn-light">OFF</button></a>
   
    {% else %}
     <a href="{{url_for('user.toggle_registration_status')}}" <button class="btn btn btn-light">ON</button></a>
   <a href="{{url_for('user.toggle_registration_status')}}" <button class="btn btn btn-primary active">OFF</button></a>

    {% endif %}
   
  </div>
   
   </div>
   
   <div class="col-md-4">
    <p><a href="{{url_for('api.create_api_key')}}"" <button class="btn btn-outline-primary"><i class="fa fa-plug"></i> Register new API key</button></a></p>
  
   </div>
   
 </div>
  <br>
  <link rel="stylesheet" href="/static/css/form-control-borderless.css">
         <div class="row justify-content-left">
            <div class="col-12 col-md-10 col-lg-8">
                <form class="card">
                    <div class="card-body row no-gutters align-items-center">
                        <div class="col-auto">
                            <i class="fas fa-search h4 text-body">
          </i>
                        </div>
                        <!--end of col-->
                        <div class="col">
                            <input id="myInput" class="form-control form-control-lg form-control-borderless" type="search" placeholder="Search for API Keys">
                        </div>
                        <!--end of col-->
                    </div>
                </form>
            </div>
            <!--end of col-->
        </div>

<br>
   <h3>API Keys</h3>
   <br>
   
   {% if api_keys|length == 0 %}
   <p>There are no API keys registered.</p>
   
   {% else %}
      <div class="table-responsive">
            <table id="dtBasicExample" summary="User table" class="table table-striped table-bordered table-sm table-hover text-small"  cellspacing="0" width="100%">
           <thead>
              <tr>
              <th><i class="fa fa-key"></i></th>
              <th><i class="fa fa-id-card-alt"></i></th>
              <th><i class="fa fa-seedling"></i></th>
        		  <th><i class="fa fa-tools"></i></th>
            </tr>
          </thead>
		  <tbody id="searchableTable">
			{% for api_key in api_keys %}
            <tr>
              <td>{{api_key.key}}</td>
              <td>{{api_key.description}}</td>
              <td>{{api_key.created}}</td>
              <td>
              <a href="{{url_for('api.delete_api_key', id = api_key.id)}}" class="btn btn-outline-danger btn-sm" role="button"><i class="fa fa-trash-alt"></i> Remove</a>
              </td>
            </tr>
           {% endfor %}
          </tbody>
          <tfoot>
            <tr>
            </tr>
          </tfoot>
        </table>
      </div><!--end of .table-responsive-->
      {% endif %}
 
</div>
</div>
{% endblock %}
</div>
{% endblock %}
